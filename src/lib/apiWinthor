

export async function loginOtherApi(login: string, password: string): Promise<string> {
    
    const res = await fetch(`http://r3suprimentos188810.winthor.cloudtotvs.com.br:80/winthor/autenticacao/v1/login`, {
        
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({ login, password }),
    });

    if (!res.ok) {
        const errorData = await res.json();
        throw new Error(`Login na segunda API falhou: ${errorData.message || "Erro desconhecido"}`);
    }

    const data = await res.json();

    localStorage.setItem("other_api_token", data.access_token);

    return data.access_token;
}